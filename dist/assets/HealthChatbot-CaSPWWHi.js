import{r as l,y as E,j as e}from"./index-CXTOnbpn.js";const j={cyan:{gradient:"from-cyan-600 to-sky-700",glow:"shadow-cyan-900/50",ring:"ring-cyan-500/30",userBubble:"bg-gradient-to-br from-cyan-600 to-sky-700",dot:"bg-cyan-400",pillBorder:"border-cyan-500/30 text-cyan-300 hover:bg-cyan-500/10",sendBtn:"bg-gradient-to-r from-cyan-600 to-sky-700 hover:from-cyan-500 hover:to-sky-600",title:"text-cyan-300",badge:"bg-cyan-500/15 border-cyan-500/30 text-cyan-400"},violet:{gradient:"from-violet-600 to-purple-700",glow:"shadow-violet-900/50",ring:"ring-violet-500/30",userBubble:"bg-gradient-to-br from-violet-600 to-purple-700",dot:"bg-violet-400",pillBorder:"border-violet-500/30 text-violet-300 hover:bg-violet-500/10",sendBtn:"bg-gradient-to-r from-violet-600 to-purple-700 hover:from-violet-500 hover:to-purple-600",title:"text-violet-300",badge:"bg-violet-500/15 border-violet-500/30 text-violet-400"}},L=({msg:n,accent:d})=>{const c=j[d],r=n.role==="user";return e.jsxs("div",{className:`flex ${r?"justify-end":"justify-start"} mb-3`,children:[!r&&e.jsx("div",{className:"w-7 h-7 rounded-full bg-white/10 flex items-center justify-center text-base mr-2 mt-1 flex-shrink-0 border border-white/10",children:"ðŸ¤–"}),e.jsx("div",{className:`max-w-[80%] px-4 py-3 rounded-2xl text-sm leading-relaxed whitespace-pre-wrap shadow-lg
                ${r?`${c.userBubble} text-white rounded-br-sm`:"bg-white/[0.07] border border-white/10 text-slate-200 rounded-bl-sm"}`,children:n.content}),r&&e.jsx("div",{className:"w-7 h-7 rounded-full bg-white/10 flex items-center justify-center text-base ml-2 mt-1 flex-shrink-0 border border-white/10",children:"ðŸ‘¤"})]})},M=()=>e.jsx("div",{className:"flex items-center gap-1.5 px-4 py-3 bg-white/[0.07] border border-white/10 rounded-2xl rounded-bl-sm w-fit mb-3 ml-9",children:[0,1,2].map(n=>e.jsx("span",{className:"w-1.5 h-1.5 bg-slate-400 rounded-full animate-bounce",style:{animationDelay:`${n*.15}s`}},n))}),H=({accent:n="cyan",contextSummary:d,suggestedQuestions:c=[]})=>{const[r,N]=l.useState(!1),[a,u]=l.useState([]),[x,b]=l.useState(""),[i,g]=l.useState(!1),[f,m]=l.useState(""),w=l.useRef(null),y=l.useRef(null),s=j[n];l.useEffect(()=>{var t;(t=w.current)==null||t.scrollIntoView({behavior:"smooth"})},[a,i]),l.useEffect(()=>{r&&setTimeout(()=>{var t;return(t=y.current)==null?void 0:t.focus()},120)},[r]);const p=l.useCallback(async t=>{const o=t.trim();if(!o||i)return;b(""),m("");const v={role:"user",content:o};u(h=>[...h,v]),g(!0);try{const h=[...a,v],$=await E(h,d);u(B=>[...B,{role:"assistant",content:$}])}catch{m("Could not get a response. Please try again.")}finally{g(!1)}},[a,i,d]),k=t=>{t.key==="Enter"&&!t.shiftKey&&(t.preventDefault(),p(x))},C=a.length===0;return e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>N(t=>!t),"aria-label":r?"Close chatbot":"Open health chatbot",className:`fixed bottom-6 right-6 z-50 w-14 h-14 rounded-2xl bg-gradient-to-br ${s.gradient} text-white text-2xl flex items-center justify-center shadow-2xl ${s.glow} hover:scale-110 active:scale-95 transition-all duration-200 ring-2 ${s.ring}`,children:[r?e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M6 18L18 6M6 6l12 12"})}):"ðŸ’¬",!r&&a.length>0&&e.jsx("span",{className:`absolute -top-1 -right-1 w-4 h-4 ${s.dot} rounded-full text-[8px] font-black text-white flex items-center justify-center`,children:a.length})]}),r&&e.jsxs("div",{className:`fixed bottom-24 right-6 z-50 w-[350px] sm:w-[400px] max-h-[580px] flex flex-col rounded-3xl overflow-hidden shadow-2xl ${s.glow} ring-1 ${s.ring} bg-[#070f1c]/95 backdrop-blur-2xl border border-white/10`,children:[e.jsxs("div",{className:`bg-gradient-to-r ${s.gradient} px-5 py-4 flex items-center justify-between flex-shrink-0`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-9 h-9 rounded-xl bg-white/20 flex items-center justify-center text-xl",children:"ðŸ¤–"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-black text-white text-sm",children:"Health AI Assistant"}),e.jsxs("div",{className:"flex items-center gap-1.5 mt-0.5",children:[e.jsx("span",{className:`w-1.5 h-1.5 ${s.dot} rounded-full animate-pulse`}),e.jsx("p",{className:"text-[10px] text-white/70",children:"Multilingual Â· Context-aware"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`text-[9px] font-black px-2 py-1 rounded-full border ${s.badge} uppercase tracking-wider`,children:"Any Language"}),e.jsx("button",{onClick:()=>{u([]),m("")},title:"Clear chat",className:"w-7 h-7 rounded-lg bg-white/10 hover:bg-white/20 text-white/70 hover:text-white flex items-center justify-center transition-colors",children:e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),d&&e.jsx("div",{className:"px-4 pt-3 flex-shrink-0",children:e.jsxs("div",{className:`text-[10px] font-black px-3 py-1.5 rounded-full border ${s.badge} flex items-center gap-2`,children:[e.jsx("span",{children:"ðŸ“‹"}),e.jsx("span",{children:"Scan result loaded â€” ask me anything about it!"})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto px-4 py-4 min-h-0",children:[C&&e.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-5 py-6",children:[e.jsx("div",{className:`w-16 h-16 rounded-2xl bg-gradient-to-br ${s.gradient} flex items-center justify-center text-3xl shadow-lg ${s.glow}`,children:"ðŸ¤–"}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:`font-black ${s.title} mb-1`,children:"Ask me anything!"}),e.jsx("p",{className:"text-xs text-slate-500 max-w-52",children:"I reply in your language â€” English, Hindi, Spanish, Arabic, or any other."})]}),c.length>0&&e.jsx("div",{className:"flex flex-col gap-2 w-full",children:c.map((t,o)=>e.jsx("button",{onClick:()=>p(t),className:`text-xs text-left px-3 py-2.5 rounded-xl bg-white/[0.04] border ${s.pillBorder} transition-colors leading-snug`,children:t},o))})]}),a.map((t,o)=>e.jsx(L,{msg:t,accent:n},o)),i&&e.jsx(M,{}),f&&e.jsx("p",{className:"text-xs text-red-400 text-center mt-2 bg-red-500/10 border border-red-500/20 rounded-xl px-3 py-2",children:f}),e.jsx("div",{ref:w})]}),e.jsxs("div",{className:"px-4 pb-4 pt-2 border-t border-white/[0.07] flex-shrink-0",children:[e.jsxs("div",{className:"flex gap-2 items-end bg-white/[0.05] border border-white/10 rounded-2xl p-2 focus-within:border-white/20 transition-colors",children:[e.jsx("textarea",{ref:y,value:x,onChange:t=>b(t.target.value),onKeyDown:k,placeholder:"Type your questionâ€¦ (any language)",rows:1,className:"flex-1 bg-transparent text-sm text-white placeholder-slate-500 resize-none outline-none py-1 px-2 leading-relaxed max-h-24 overflow-y-auto",style:{minHeight:"28px"},disabled:i}),e.jsx("button",{onClick:()=>p(x),disabled:!x.trim()||i,className:`flex-shrink-0 w-9 h-9 rounded-xl ${s.sendBtn} text-white flex items-center justify-center disabled:opacity-40 disabled:cursor-not-allowed transition-all hover:scale-105 active:scale-95`,children:i?e.jsxs("svg",{className:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}):e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]}),e.jsx("p",{className:"text-[10px] text-slate-600 text-center mt-2",children:"Press Enter to send Â· Shift+Enter for new line"})]})]})]})};export{H};
