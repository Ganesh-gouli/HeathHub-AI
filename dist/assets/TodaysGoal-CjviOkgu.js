import{u as M,r as b,d as H,j as e,I as s}from"./index-CXTOnbpn.js";const U=()=>{const{dailyLog:i,user:t,navigateTo:S}=M(),[T,u]=b.useState(!1),[a,G]=b.useState(null),[p,F]=b.useState([]);b.useEffect(()=>{const r=new SpeechSynthesisUtterance;G(r);const l=()=>{F(speechSynthesis.getVoices())};return speechSynthesis.addEventListener("voiceschanged",l),l(),()=>{speechSynthesis.removeEventListener("voiceschanged",l),speechSynthesis.cancel()}},[]);const C=t?H(t):2e3,y=i.caloriesIn,f=i.caloriesOut,W=y-f,$=18.5,I=25;let o="Maintain Weight",d=0,k="balance your intake with your activity.";t&&(t.bmi>=I?(o="Weight Loss",d=-500,k="achieve a healthy weight loss."):t.bmi<$&&(o="Weight Gain",d=500,k="gain weight healthily."));const v=C+d+f,c=v-y,L=c<0;let g="",x="blue",h=s.checkCircle;if(c>=0)o==="Weight Gain"?(g=`Eat ${c.toFixed(0)} more calories to reach your weight gain goal.`,x="green",h=s.flame):(g=`You have ${c.toFixed(0)} calories left in your budget. Good job!`,x="green",h=s.checkCircle);else{const r=Math.abs(c).toFixed(0);o==="Weight Gain"?(g="Fantastic! You've hit your calorie surplus target for the day.",x="blue",h=s.star):(g=`You're ${r} calories over limit. A workout could help balance this.`,x="orange",h=s.dumbbell)}const n={title:`Goal: ${o}`,summary:`Based on your Age (${t==null?void 0:t.age}) and BMI (${t==null?void 0:t.bmi}), your maintenance level is ${C.toFixed(0)} kcal. We adjusted this by ${d>0?"+":""}${d} kcal to help you ${k}`,actionableAdvice:{text:g,color:x,icon:h}};b.useEffect(()=>{var E;const r=(E=n==null?void 0:n.actionableAdvice)==null?void 0:E.text;if(!a||!r||p.length===0||speechSynthesis.speaking&&a.text===r)return;speechSynthesis.cancel(),a.text=r;const l=p.find(m=>m.lang.startsWith("en")&&m.name.match(/female|woman|zira|susan/i));l&&(a.voice=l),a.onstart=()=>u(!0),a.onend=()=>u(!1),a.onerror=m=>{m.error!=="interrupted"&&console.error("Speech synthesis error:",m.error),u(!1)}},[a,p,n.actionableAdvice.text]);const A=()=>{speechSynthesis.speaking?(speechSynthesis.cancel(),u(!1)):a&&(a.text=n.actionableAdvice.text,speechSynthesis.speak(a))},{title:O,summary:R,actionableAdvice:j}=n,N=Math.max(0,y/v*100);let w="bg-gradient-to-r from-green-400 to-green-600";L&&o!=="Weight Gain"?w="bg-red-500":o==="Weight Gain"&&N<100&&(w="bg-gradient-to-r from-yellow-400 to-orange-500");const B={green:"bg-green-100 dark:bg-green-900/50 text-green-800 dark:text-green-200",orange:"bg-orange-100 dark:bg-orange-900/50 text-orange-800 dark:text-orange-200",blue:"bg-blue-100 dark:bg-blue-900/50 text-blue-800 dark:text-blue-200"};return e.jsxs("div",{className:"max-w-5xl mx-auto space-y-8 animate-fade-in",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-extrabold text-gray-900 dark:text-white tracking-tight",children:"Today's Goal Tracker"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"Monitor your daily calorie balance and habits."})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-6 flex items-center",children:["Today's Intake",e.jsxs("span",{className:"ml-auto text-xs font-normal text-gray-500 bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded-full",children:["Target: ",v.toFixed(0)]})]}),e.jsxs("div",{className:"relative pt-2",children:[e.jsxs("div",{className:"flex items-end justify-between mb-2",children:[e.jsx("span",{className:"text-3xl font-extrabold text-gray-900 dark:text-white",children:y.toFixed(0)}),e.jsx("span",{className:"text-sm text-gray-500 mb-1",children:"kcal"})]}),e.jsx("div",{className:"w-full bg-gray-100 dark:bg-gray-700 rounded-full h-4 overflow-hidden",children:e.jsx("div",{className:`h-4 rounded-full transition-all duration-1000 ease-out ${w}`,style:{width:`${Math.min(100,N)}%`}})}),e.jsxs("p",{className:"text-right text-xs text-gray-400 mt-1",children:[N.toFixed(0),"% of target"]})]}),e.jsxs("div",{className:"mt-8 grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-orange-50 dark:bg-orange-900/10 rounded-xl border border-orange-100 dark:border-orange-800/30",children:[e.jsx("p",{className:"text-xs font-semibold text-orange-600 dark:text-orange-400 uppercase tracking-wide",children:"Burned"}),e.jsx("p",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mt-1",children:f.toFixed(0)})]}),e.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/10 rounded-xl border border-blue-100 dark:border-blue-800/30",children:[e.jsx("p",{className:"text-xs font-semibold text-blue-600 dark:text-blue-400 uppercase tracking-wide",children:"Net"}),e.jsx("p",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mt-1",children:W.toFixed(0)})]})]})]}),e.jsxs("div",{className:"bg-gray-100 dark:bg-gray-700/50 p-6 rounded-2xl border border-transparent dark:border-gray-700 flex flex-col",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-200 mb-2",children:O}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6 leading-relaxed text-sm",children:R}),e.jsxs("div",{className:`mt-auto p-4 rounded-xl flex flex-col sm:flex-row items-start sm:items-center gap-4 ${B[j.color]}`,children:[e.jsx("div",{className:"p-2 bg-white/50 dark:bg-black/10 rounded-full",children:j.icon}),e.jsx("div",{className:"flex-grow",children:e.jsx("p",{className:"font-semibold text-sm sm:text-base",children:j.text})}),e.jsx("button",{onClick:A,className:"p-2 rounded-full hover:bg-white/20 transition-colors shrink-0 focus:outline-none focus:ring-2 focus:ring-white/50",children:T?s.speakerOff:s.speaker})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:"Logged Items Details"}),i.loggedFoods&&i.loggedFoods.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:i.loggedFoods.map((r,l)=>e.jsxs("div",{className:"flex justify-between items-center text-sm p-3 rounded-xl bg-gray-50 dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors border border-gray-100 dark:border-gray-700",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-200",children:r.name}),e.jsx("span",{className:"text-[10px] text-gray-400 uppercase tracking-wider",children:r.source})]}),e.jsxs("span",{className:"font-bold text-green-600 dark:text-green-400",children:[r.calories.toFixed(0)," kcal"]})]},l))}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-32 text-gray-400 dark:text-gray-500 border-2 border-dashed border-gray-200 dark:border-gray-700 rounded-xl",children:[e.jsx("svg",{className:"w-8 h-8 mb-2 opacity-50",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),e.jsx("p",{className:"text-sm",children:"No food logged yet"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("button",{onClick:()=>S("CALORIE_COUNTER"),className:"w-full py-4 px-4 bg-green-600 text-white font-bold rounded-xl shadow-lg shadow-green-500/30 hover:bg-green-700 hover:shadow-xl transition-all transform hover:-translate-y-0.5 flex items-center justify-center space-x-2",children:[s.flame,e.jsx("span",{children:"Log a Meal"})]}),e.jsxs("button",{onClick:()=>S("EXERCISE_CORNER"),className:"w-full py-4 px-4 bg-purple-600 text-white font-bold rounded-xl shadow-lg shadow-purple-500/30 hover:bg-purple-700 hover:shadow-xl transition-all transform hover:-translate-y-0.5 flex items-center justify-center space-x-2",children:[s.dumbbell,e.jsx("span",{children:"Log a Workout"})]})]})]})};export{U as default};
